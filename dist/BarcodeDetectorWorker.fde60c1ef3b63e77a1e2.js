!function(r){function e(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return r[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t={};e.m=r,e.c=t,e.i=function(r){return r},e.d=function(r,t,a){e.o(r,t)||Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:a})},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},e.p="",e(e.s=0)}([function(r,e,t){"use strict";function a(r,e,t,a){var n,h,i=[];switch(a){case 90:for(n=0;n<4*e;n+=4)for(h=4*e*(t-1);h>=0;h-=4*e)i.push(r[n+h]),i.push(r[n+h+1]),i.push(r[n+h+2]),i.push(r[n+h+3]);break;case-90:for(n=4*e-4;n>=0;n-=4)for(h=0;h<r.length;h+=4*e)i.push(r[n+h]),i.push(r[n+h+1]),i.push(r[n+h+2]),i.push(r[n+h+3]);break;case 180:for(h=4*e*(t-1);h>=0;h-=4*e)for(n=4*e-4;n>=0;n-=4)i.push(r[n+h]),i.push(r[n+h+1]),i.push(r[n+h+2]),i.push(r[n+h+3])}return new Uint8ClampedArray(i)}function n(r,e,t){var a,n,h,i,o=[],l=[];for(n=0;n<e;n++)for(o.push([]),l.push(0),h=0;h<(t+1)*e;h+=e)o[o.length-1].push(r[n+h]),l[l.length-1]=l[l.length-1]+r[n+h];var c=[];for(h=0;h<r.length;h+=e){for(n=0;n<e;n++){var u=0,f=0;for(i=n;i>=0&&(u+=l[i],++f!==t+1);i--);var s=0;for(i=n+1;i<e&&(u+=l[i],f++,++s!==t);i++);f*=o[0].length,u/=f,c.push(u)}if(h-t*e>=0)for(i=0;i<o.length;i++)a=o[i].shift(),l[i]=l[i]-a;if(h+(t+1)*e<r.length)for(i=0;i<o.length;i++)a=r[i+h+(t+1)*e],o[i].push(a),l[i]=l[i]+a}return c}function h(r,e,t){var a,n,h=[];for(n=0;n<r.length;n+=8*e)for(a=0;a<4*e;a+=8){var i=(r[n+a]+r[n+a+4]+r[n+4*e+a]+r[n+4*e+a+4])/4;h.push(i);var o=(r[n+a+1]+r[n+a+4+1]+r[n+4*e+a+1]+r[n+4*e+a+4+1])/4;h.push(o);var l=(r[n+a+2]+r[n+a+4+2]+r[n+4*e+a+2]+r[n+4*e+a+4+2])/4;h.push(l),h.push(255)}return new Uint8ClampedArray(h)}function i(r,e){var t,a,n,h=[],i=Number.MIN_VALUE,o=Number.MAX_VALUE;for(a=0;a<r.length;a+=4*e)for(t=0;t<4*e;t+=4){var l=0,c=0;for(n=1;n<2;n++)t+4*n<4*e&&(l+=Math.abs(r[a+t]-r[a+t+4*n])),a+4*e*n<r.length&&(c+=c+Math.abs(r[a+t]-r[a+t+4*e*n]));var u=l-c;i=u>i?u:i,o=u<o?u:o,h.push(u)}if(o<0){for(n=0;n<h.length;n++)h[n]=h[n]-o;o=0}return h}function o(r){var e;for(e=0;e<r.length;e+=4){var t=0,a=255;t=r[e]>t?r[e]:t,t=r[e+1]>t?r[e+1]:t,t=r[e+2]>t?r[e+2]:t,a=r[e]<a?r[e]:a,a=r[e+1]<a?r[e+1]:a,a=r[e+2]<a?r[e+2]:a,r[e]=r[e+1]=r[e+2]=(t+a)/2}}function l(r,e){var t,a,n,h=0,i=0,o=0,l=0,c=0,u=0,f=0,s=0;for(t=1;t<r.length;++t)h+=t*r[t];for(t=0;t<r.length;++t)if(0!==(o+=r[t])){if(0===(l=e-o))break;i+=t*r[t],a=i/o,n=(h-i)/l,u=o*l*Math.pow(a-n,2),u>=c&&(f=t,u>c&&(s=t),c=u)}return(f+s)/2}function c(){var r,e,t;for(K.data=new Uint8ClampedArray(K.width*K.height*4),t=0;t<K.height;t++)for(e=0;e<K.width;e++)r=4*t*K.width,K.data[r+4*e]=K.table[e][t][0],K.data[r+4*e+1]=K.table[e][t][1],K.data[r+4*e+2]=K.table[e][t][2],K.data[r+4*e+3]=K.table[e][t][3]}function u(){var r,e,t=[];for(K.table=[],r=0;r<4*K.width;r+=4){for(t=[],e=r;e<K.data.length;e+=4*K.width)t.push([K.data[e],K.data[e+1],K.data[e+2],K.data[e+3]]);K.table.push(t)}}function f(){var r,e,t=[];for($.table=[],r=0;r<4*$.width;r+=4){for(t=[],e=r;e<$.data.length;e+=4*$.width)t.push([$.data[e],$.data[e+1],$.data[e+2],$.data[e+3]]);$.table.push(t)}}function s(r,e){var t,a,n,h=[];for(t=0;t<K.width;t++){for(h=[],a=0;a<K.height;a++)for(n=0;n<r;n++)h.push(K.table[t][a]);K.table[t]=h.slice()}for(h=K.table.slice(),t=0;t<K.width;t++)for(n=0;n<e;n++)K.table[t*e+n]=h[t].slice();K.width=K.table.length,K.height=K.table[0].length,c()}function v(r){var e,t,a,n=[],h=0,i=0,o=0;for(e=0;e<K.height-r;e+=r)for(t=0;t<K.width;t++){for(h=0,i=0,o=0,a=e;a<e+r;a++)h+=K.table[t][a][0],i+=K.table[t][a][1],o+=K.table[t][a][2];n.push(h/r),n.push(i/r),n.push(o/r),n.push(255)}return new Uint8ClampedArray(n)}function d(r,e){return r[0][0]<=e[0][1]&&e[0][0]<=r[0][1]&&r[1][0]<=e[1][1]&&e[1][0]<=r[1][1]}function g(r,e,t){var a,n,h,i=r,o=[];do{var l=e%K.width,c=(e-l)/K.width,u=0,f=K.height,s=0,v=K.width-1;for(n=c;n<K.height-1;n++)if(0===K.table[l][n+1][0]){f=n;break}for(n=c;n>0;n--)if(0===K.table[l][n-1][0]){u=n;break}for(a=l;a<K.width-1;a++)if(0===K.table[a+1][c][0]){v=a;break}for(a=l;a>0;a--)if(0===K.table[a-1][c][0]){s=a;break}for(n=u*K.width;n<=f*K.width;n+=K.width)for(a=s;a<=v;a++)t[n+a]=0;var g=[[s,v],[u,f]];for(h=0;h<o.length;h++)if(d(g,o[h])){if(o[h][0][1]-o[h][0][0]>g[0][1]-g[0][0]){o[h][0][0]=o[h][0][0]<g[0][0]?o[h][0][0]:g[0][0],o[h][0][1]=o[h][0][1]>g[0][1]?o[h][0][1]:g[0][1],g=[];break}o[h][0][0]=o[h][0][0]<g[0][0]?o[h][0][0]:g[0][0],o[h][0][1]=o[h][0][1]>g[0][1]?o[h][0][1]:g[0][1],o[h][1][0]=g[1][0],o[h][1][1]=g[1][1],g=[];break}for(g.length>0&&o.push(g),r=0,e=0,h=0;h<t.length;h++)t[h]>r&&(r=t[h],e=h)}while(r>.7*i);return o}function C(){var r,e,t,a,h,f=0,s=0,v=0;for(o(K.data),r=i(K.data,K.width),e=r[0],r=n(r,K.width,15),t=1;t<r.length;t++)e=e>r[t]?r[t]:e;for(t=0;t<r.length;t++)r[t]=Math.round(r[t]-e),v+=r[t],f<r[t]&&(f=r[t],s=t);if((v/=r.length)<15){for(r=n(r,K.width,8),e=r[0],t=1;t<r.length;t++)e=e>r[t]?r[t]:e;for(f=0,s=0,t=0;t<r.length;t++)r[t]=Math.round(r[t]-e),f<r[t]&&(f=r[t],s=t)}var d=[];for(t=0;t<=f;t++)d[t]=0;for(t=0;t<r.length;t++)d[r[t]]=d[r[t]]+1;var C=l(d,r.length);for(t=0;t<r.length;t++)r[t]<C?K.data[4*t]=K.data[4*t+1]=K.data[4*t+2]=0:K.data[4*t]=K.data[4*t+1]=K.data[4*t+2]=255;u();var A=g(f,s,r),p=[];for(t=0;t<A.length;t++)p.push({x:A[t][0][0],y:A[t][1][0],width:A[t][0][1]-A[t][0][0],height:A[t][1][1]-A[t][1][0]});for(p.length>0&&postMessage({result:p,success:"localization"}),Q=p,W=[],t=0;t<A.length;t++){var B=[];for(a=2*A[t][0][0];a<2*A[t][0][1];a++){var b=[];for(h=2*A[t][1][0];h<2*A[t][1][1];h++)b.push([$.table[a][h][0],$.table[a][h][1],$.table[a][h][2],255]);B.push(b)}B.length<1||(K.table=B,K.width=B.length,K.height=B[0].length,c(),W.push({table:B,data:new Uint8ClampedArray(K.data),width:K.width,height:K.height}))}}function A(r,e,t){var a,n,h,i=0,o=new Uint8ClampedArray(K.width*(t-e+1)*4);for(n=0;n<o.length;n++)o[n]=255;for(n=0;n<4*K.width;n+=4)for(a=t,i=(r[n]+r[n+1]+r[n+2])/3,n<4*K.width-4&&(i+=(r[n+4]+r[n+5]+r[n+6])/3,i/=2),h=n;h<o.length;h+=4*K.width)i<a&&(o[h]=o[h+1]=o[h+2]=0),a--;return o}function p(r,e){if(e){if(5!==r.length)return!1}else if(3!==r.length)return!1;for(var t=0,a=0;a<r.length;a++)t+=r[a];t/=r.length;for(var n=0;n<r.length;n++)if(r[n]/t<.5||r[n]/t>1.5)return!1;return!0}function B(r,e){var t,a,n,h=[],i=[],o=0;if("Code128"===e||"Code93"===e){for(a=6,t=r[0],"Code128"===e&&(t/=2),n=0;n<r.length;n++)if(r[n]>6*t){r.splice(n,r.length);break}do{7===r.length&&"Code128"===e?h.push(r.splice(0,r.length)):h.push(r.splice(0,a)),"Code93"===e&&r.length<6&&r.splice(0,a)}while(r.length>0)}if("Code39"===e){for(a=9,t=r[0],n=0;n<r.length;n++)if(r[n]>5*t){r.splice(n,r.length);break}do{h.push(r.splice(0,a)),r.splice(0,1)}while(r.length>0)}if("EAN-13"===e){a=4,t=r[0];var l=0;for(n=0;n<r.length;n++)if(r[n]>6*t){r.splice(n,r.length);break}p(r.splice(0,3),!1)&&l++,o=0;do{h.push(r.splice(0,a)),6===++o&&p(r.splice(0,5),!0)&&l++}while(h.length<12&&r.length>0);if(p(r.splice(0,3),!1)&&l++,l<2)return[]}if("2Of5"===e){for(a=5,t=r[0]/2,n=0;n<r.length;n++)if(r[n]>5*t){r.splice(n,r.length);break}var c=r.splice(0,6);h.push(c);do{for(i=[],n=0;n<a;n++)i.push(r.splice(0,1)[0]);h.push(i),5===r.length&&h.push(r.splice(0,5))}while(r.length>0)}if("Inter2Of5"===e){for(a=5,t=r[0],n=0;n<r.length;n++)if(r[n]>5*t){r.splice(n,r.length);break}h.push(r.splice(0,4));var u=[];do{for(i=[],u=[],n=0;n<a;n++)i.push(r.splice(0,1)[0]),u.push(r.splice(0,1)[0]);h.push(i),h.push(u),3===r.length&&h.push(r.splice(0,3))}while(r.length>0)}if("Codabar"===e){for(a=7,t=r[0],n=0;n<r.length;n++)if(r[n]>5*t){r.splice(n,r.length);break}do{h.push(r.splice(0,a)),r.splice(0,1)}while(r.length>0)}return h}function b(r,e){if(r.length<5||r.length>6)return!1;var t=0,a=[0,0],n=void 0;for(n=0;n<r.length;n++)r[n]>t&&(t=r[n],a[0]=n);for(t=0,n=0;n<r.length;n++)n!==a[0]&&r[n]>t&&(t=r[n],a[1]=n);return a[0]+a[1]===2}function w(r,e){var t,a=0;for(t=0;t<r.length;t++)a+=r[t];if(a/=4,e){if(4!==r.length)return!1;for(t=0;t<r.length;t++)if(r[t]/a<.5||r[t]/a>1.5)return!1;return!0}if(3!==r.length)return!1;var n=0,h=void 0;for(t=0;t<r.length;t++)r[t]>n&&(n=r[t],h=t);if(0!==h)return!1;if(r[0]/a<1.5||r[0]/a>2.5)return!1;for(t=1;t<r.length;t++)if(r[t]/a<.5||r[t]/a>1.5)return!1;return!0}function L(r,e){var t,a,n,h,i,o,l,c,u,f,s,v,d,g=0,C=[];for(e=_.indexOf(e),0===e?(a=11,t=6,n=4):1===e?(a=9,t=6,n=4):2===e?(a=12,t=9):3===e?(a=7,t=4,n=4):6===e&&(t=7),h=0;h<r.length;h++){var A=r[h],p=0,B=0,b=[];if(6!==e)if(4!==e&&5!==e){for(;B<t;)p+=A[B],B++;if(2!==e)if(3!==e){for(B=0;B<t;)b.push(A[B]/p*a),B++;for(B=0;B<t;)b[B]=b[B]>n?n:b[B],b[B]=b[B]<1?1:b[B],b[B]=Math.round(b[B]),B++;if(3===e){for(var w=0,L=0;L<b.length;L++)w+=b[L];if(w>7){d=0;for(var N=0,G=0;G<b.length;G++)b[G]>d&&(d=b[G],N=G);b[N]=d-(w-7)}}if(3===e)for(i=0;i<b.length;i++)g+=Math.abs(b[i]-A[i]/p*a);C.push(b)}else{for(d=[[0,0],[0,0],[0,0]],o=0;o<A.length;o++)A[o]>d[0][0]&&(d[0][0]=A[o],s=d[0][1],d[0][1]=o,o=s),A[o]>d[1][0]&&o!==d[0][1]&&(d[1][0]=A[o],s=d[1][1],d[1][1]=o,o=s),A[o]>d[2][0]&&o!==d[0][1]&&o!==d[1][1]&&(d[2][0]=A[o],d[2][1]=o);if(d[0][0]/d[1][0]>=3){for(f=0,o=0;o<A.length;o++)o!==d[0][1]&&(f+=A[o]);for(f/=3,o=0;o<A.length;o++)if(o!==d[0][1]&&(A[o]/f<.02||A[o]/f>3))return{data:[],correction:0};if(d[0][0]/f<2.2||d[0][0]/f>6)return{data:[],correction:0};for(o=0;o<A.length;o++)o===d[0][1]?b.push(4):b.push(1);C.push(b)}else if(d[0][0]/d[2][0]>2){if(u=d[0][0]+d[1][0],u/=5,d[0][0]/(3*u)<.02||d[0][0]/(3*u)>3)return{data:[],correction:0};if(d[1][0]/(2*u)<.02||d[1][0]/(2*u)>3)return{data:[],correction:0};for(f=0,o=0;o<A.length;o++)o!==d[0][1]&&o!==d[1][1]&&(f+=A[o]);for(f/=2,o=0;o<A.length;o++)if(o!==d[0][1]&&o!==d[1][1]&&(A[o]/f<.02||A[o]/f>3))return{data:[],correction:0};for(o=0;o<A.length;o++)o===d[0][1]?b.push(3):o===d[1][1]?b.push(2):b.push(1);C.push(b)}else{if(d[0][1]%2==d[1][1]%2&&d[0][1]%2==d[2][1]%2){var O=d[0][1]%2;for(d[2]=[0,0],o=0;o<A.length;o++)o%2!==O&&A[o]>d[2][0]&&(d[2][0]=A[o],d[2][1]=o)}for(u=d[0][0]+d[1][0]+d[2][0],u/=3,o=0;o<d.length;o++)if(d[o][0]/u<.02||d[o][0]/u>3)return{data:[],correction:0};var j=0;for(o=0;o<A.length;o++)o!==d[0][1]&&o!==d[1][1]&&o!==d[2][1]&&(j=A[o]);if(u/j<.02||u/j>3)return{data:[],correction:0};for(o=0;o<A.length;o++)o===d[0][1]||o===d[1][1]||o===d[2][1]?b.push(2):b.push(1);C.push(b)}for(o=0;o<b.length;o++)g+=Math.abs(b[o]-A[o]/p*a)}else{for(l=[[0,0],[0,0]],c=[0,0],o=0;o<A.length;o++)o%2==0?(A[o]>l[0][0]&&(l[0][0]=A[o],s=l[0][1],l[0][1]=o,o=s),A[o]>l[1][0]&&o!==l[0][1]&&(l[1][0]=A[o],l[1][1]=o)):A[o]>c[0]&&(c[0]=A[o],c[1]=o);if(c[0]/l[0][0]>1.5&&c[0]/l[1][0]>1.5)for(l=[[0,0],[0,0]],o=0;o<A.length;o++)o%2!=0&&(A[o]>l[0][0]&&o!==c[1]&&(l[0][0]=A[o],s=l[0][1],l[0][1]=o,o=s),A[o]>l[1][0]&&o!==l[0][1]&&o!==c[1]&&(l[1][0]=A[o],l[1][1]=o));if(u=l[0][0]+l[1][0]+c[0],u/=3,l[0][0]/u>1.6||l[0][0]/u<.4)return[];if(l[1][0]/u>1.6||l[1][0]/u<.4)return[];if(c[0]/u>1.6||c[0]/u<.4)return[];for(f=0,i=0;i<A.length;i++)i!==l[0][1]&&i!==l[1][1]&&i!==c[1]&&(f+=A[i]);for(f/=6,i=0;i<A.length;i++)if(i!==l[0][1]&&i!==l[1][1]&&i!==c[1]&&(A[i]/f>1.6||A[i]/f<.4))return[];for(o=0;o<A.length;o++)o===l[0][1]||o===l[1][1]||o===c[1]?b.push(2):b.push(1);C.push(b)}}else{for(d=[[0,0],[0,0]],i=0;i<A.length;i++){if(!isFinite(A[i]))return[];A[i]>d[0][0]&&(d[0][0]=A[i],s=d[0][1],d[0][1]=i,i=s-1),A[i]>d[1][0]&&i!==d[0][1]&&(d[1][0]=A[i],d[1][1]=i)}if(V){if(u=d[0][0]+d[1][0],u/=2,d[0][0]/u>1.3||d[0][0]/u<.7)return[];if(d[1][0]/u>1.3||d[1][0]/u<.7)return[];for(f=0,i=0;i<A.length;i++)i!==d[0][1]&&i!==d[1][1]&&(f+=A[i]);for(f/=3,i=0;i<A.length;i++)if(i!==d[0][1]&&i!==d[1][1]&&(A[i]/f>1.3||A[i]/f<.7))return[]}for(i=0;i<A.length;i++)i!==d[0][1]&&i!==d[1][1]?b.push(0):b.push(1);C.push(b)}else{if(7!==A.length)return[];if(0===h||h===r.length-1){for(c=[[0,0],[0,0]],l=[0,0],i=0;i<A.length;i++)if(i%2==0)A[i]>l[0]&&(l[0]=A[i],l[1]=i);else{if(A[i]>c[0][0]){c[0][0]=A[i],s=c[0][1],c[0][1]=i,i=s-1;continue}A[i]>c[1][0]&&i!==c[0][1]&&(c[1][0]=A[i],c[1][1]=i)}if(R){for(u=c[0][0]+c[1][0]+l[0],u/=3,v=[c[0][0],c[1][0],l[0]],i=0;i<v.length;i++)if(v[i]/u>1.5||v[i]/u<.5)return[];for(f=0,i=0;i<A.length;i++)i!==l[1]&&i!==c[0][1]&&i!==c[1][1]&&(f+=A[i]);for(f/=4,i=0;i<A.length;i++)if(i!==l[1]&&i!==c[0][1]&&i!==c[1][1]&&(A[i]/f>1.5||A[i]/f<.5))return[]}for(i=0;i<A.length;i++)i===l[1]||i===c[0][1]||i===c[1][1]?b.push(1):b.push(0)}else{for(l=[0,0],c=[0,0],i=0;i<A.length;i++)i%2==0?A[i]>l[0]&&(l[0]=A[i],l[1]=i):A[i]>c[0]&&(c[0]=A[i],c[1]=i);if(l[0]/c[0]>1.55){var k=l;for(l=[k,[0,0],[0,0]],i=0;i<A.length;i++)if(i%2==0){if(A[i]>l[1][0]&&i!==l[0][1]){l[1][0]=A[i],s=l[1][1],l[1][1]=i,i=s-1;continue}A[i]>l[2][0]&&i!==l[0][1]&&i!==l[1][1]&&(l[2][0]=A[i],l[2][1]=i)}if(R){for(u=l[0][0]+l[1][0]+l[2][0],u/=3,i=0;i<l.length;i++)if(l[i][0]/u>1.5||l[i][0]/u<.5)return[];for(f=0,i=0;i<A.length;i++)i!==l[0][1]&&i!==l[1][1]&&i!==l[2][1]&&(f+=A[i]);for(f/=4,i=0;i<A.length;i++)if(i!==l[0][1]&&i!==l[1][1]&&i!==l[2][1]&&(A[i]/f>1.5||A[i]/f<.5))return[]}for(i=0;i<A.length;i++)i===l[0][1]||i===l[1][1]||i===l[2][1]?b.push(1):b.push(0)}else{if(R){if(u=l[0]+c[0],u/=2,l[0]/u>1.5||l[0]/u<.5)return[];if(c[0]/u>1.5||c[0]/u<.5)return[];for(f=0,i=0;i<A.length;i++)i!==l[1]&&i!==c[1]&&(f+=A[i]);for(f/=5,i=0;i<A.length;i++)if(i!==l[1]&&i!==c[1]&&(A[i]/f>1.5||A[i]/f<.5))return[]}for(i=0;i<A.length;i++)i===l[1]||i===c[1]?b.push(1):b.push(0)}}C.push(b)}}return 3===e?{data:C,correction:g}:C}function N(r){var e=r[r.length-2].join("");if(-1===(e=x.value.indexOf(e)))return!1;var t=x.value.indexOf(r[0].join(""));if(-1===t)return!1;var a=x[r[0].join("")];if(void 0===a)return!1;if("A"!==a&&"B"!==a&&"C"!==a)return!1;for(var n=1;n<r.length-2;n++)if(t+=x.value.indexOf(r[n].join(""))*n,-1===x.value.indexOf(r[n].join("")))return!1;return t%103===e}function G(r){for(var e="",t=0;t<r.length;t++){if(-1===T.indexOf(r[t].join("")))return!1;e+=T.indexOf(r[t].join(""))}return e}function O(r){var e="",t=r[0].join(""),a=r[r.length-1].join("");if("A"!==H[t]&&"B"!==H[t]&&"C"!==H[t]&&"D"!==H[t])return!1;if("A"!==H[a]&&"B"!==H[a]&&"C"!==H[a]&&"D"!==H[a])return!1;for(var n=1;n<r.length-1;n++){if(void 0===H[r[n].join("")])return!1;e+=H[r[n].join("")]}return e}function j(r){if(12!==r.length)return!1;for(var e=r.slice(0,6),t=!1,a=r.slice(6,r.length),n=0;n<e.length;n++)if(e[n]=e[n].join(""),4!==e[n].length){t=!0;break}if(t)return!1;for(var h=0;h<a.length;h++)if(a[h]=a[h].join(""),4!==a[h].length){t=!0;break}if(t)return!1;for(var i=[],o=0;o<e.length;o++)if(void 0!==P.L[e[o]])i.push("L");else{if(void 0===P.G[e[o]]){t=!0;break}i.push("G")}if(t)return!1;var l=[];if(void 0===P.formats[i.join("")])return!1;l.push(P.formats[i.join("")]);for(var c=0;c<e.length;c++){if(void 0===P[i[c]][e[c]]){t=!0;break}l.push(P[i[c]][e[c]])}if(t)return!1;for(var u=0;u<a.length;u++){if(void 0===P.R[a[u]]){t=!0;break}l.push(P.R[a[u]])}if(t)return!1;for(var f=3,s=0,v=l.length-2;v>=0;v--)s+=l[v]*f,f=3===f?1:3;return s=(10-s%10)%10,l[l.length-1]===s&&l.join("")}function k(r){var e=r[r.length-3].join(""),t=r[r.length-2].join(""),a=!0;if(void 0===y[e])return!1;if(void 0===y[t])return!1;for(var n=y[e].value,h=1,i=0,o=r.length-4;o>0&&(a=void 0!==y[r[o].join("")]&&a);o--)i+=y[r[o].join("")].value*h,++h>20&&(h=1);var l=i%47,c=l===n;if(!c)return!1;if(!a)return!1;i=l,h=2,n=y[t].value;for(var u=r.length-4;u>0&&(a=void 0!==y[r[u].join("")]&&a);u--)i+=y[r[u].join("")].value*h,++h>15&&(h=1);return i%47===n&&c}function F(r){var e=!0;if(void 0===U[r[0].join("")])return!1;if("*"!==U[r[0].join("")].character)return!1;if(void 0===U[r[r.length-1].join("")])return!1;if("*"!==U[r[r.length-1].join("")].character)return!1;for(var t=1;t<r.length-1;t++)if(void 0===U[r[t].join("")]){e=!1;break}return e}function m(r){var e,t="",a=!1,n="",h="";for(e=1;e<r.length-1;e++)n=U[r[e].join("")].character,("$"===n||"/"===n||"+"===n||"%"===n)&&e+1<r.length-1?(a=!0,h=n):a?(void 0===D[h+n]||(t+=D[h+n]),a=!1):t+=n;return t}function E(r){for(var e="",t=!1,a="",n="",h=1;h<r.length-3;h++)a=y[r[h].join("")].character,"($)"!==a&&"(/)"!==a&&"(+)"!==a&&"(%)"!==a?t?(void 0===D[n+a]||(e+=D[n+a]),t=!1):e+=a:(t=!0,n=a[1]);return e}function S(r){var e,t,a=x[r[0].join("")],n="Code128",h="";for(t=1;t<r.length-2;t++)switch(e=x[r[t].join("")][a]){case"FNC1":1===t&&(n="GS1-128");break;case"FNC2":case"FNC3":case"FNC4":break;case"SHIFT_B":t++,h+=x[r[t].join("")].B;break;case"SHIFT_A":t++,h+=x[r[t].join("")].A;break;case"Code_A":a="A";break;case"Code_B":a="B";break;case"Code_C":a="C";break;default:h+=e}return{string:h,format:n}}function I(r,e){var t,a,n,h,i,o=[],l=[],c=255,u=0;for(n=0;n<r.length-4*K.width;n+=4*K.width){var f=r.subarray(n,n+4*K.width);for(o=[],h=0;255===f[h];)h+=4;for(;h<f.length;){for(u=0,c=f[h];f[h]===c&&h<f.length;)u++,h+=4;o.push(u)}o.length>2&&o[0]<=o[1]/10&&o.splice(0,2);var s=o.slice(),v=!1;for(h=0;h<X.length;h++){o=s.slice();var d=void 0,g=void 0;if(o=B(o,X[h]),"2Of5"!==X[h]&&"Inter2Of5"!==X[h]||(d=o.splice(0,1)[0],g=o.splice(o.length-1,1)[0]),l=L(o,X[h]),"EAN-13"===X[h]?(o=l.data,i=l.correction):o=l,void 0!==o){if(o.length>4||"Code39"===X[h]&&o.length>2)if("Code128"===X[h])N(o)&&(o=S(o),v=!0);else if("Code93"===X[h])k(o)&&(o=E(o),v=!0);else if("Code39"===X[h])F(o)&&(o=m(o),v=!0);else if("EAN-13"===X[h])(a=j(o))&&13===a.length&&(o=a,v=!0);else if("2Of5"===X[h]||"Inter2Of5"===X[h]){if("2Of5"===X[h]){if(void 0!==d&&!b(d,!0))continue;if(void 0!==g&&!b(g,!1))continue}if("Inter2Of5"===X[h]){if(void 0!==d&&!w(d,!0))continue;if(void 0!==g&&!w(g,!1))continue}a=G(o),a&&(o=a,v=!0)}else"Codabar"===X[h]&&(a=O(o))&&(o=a,v=!0);if(v){t=X[h],"Inter2Of5"===t&&(t="Interleaved 2 of 5"),"2Of5"===t&&(t="Standard 2 of 5");break}}}if(v)break}return"Code128"===t?"string"==typeof o.string?o:{string:!1}:"string"==typeof o?"EAN-13"===t?{string:o,format:t,correction:i}:{string:o,format:t}:{string:!1}}function M(){var r,e,t,a,n,h,i,o,c,u=[];for(C(),o=0;o<W.length;o++){K=W[o];var f=v(30),d=void 0,g=0,p="",B={},b=[],w=!1;do{for(e=f.subarray(g,g+4*K.width),t=[],c=0;c<256;c++)t[c]=0;for(c=0;c<e.length;c+=4)a=Math.round((e[c]+e[c+1]+e[c+2])/3),t[a]=t[a]+1;n=l(t,e.length/4),h=n<41?1:n-40,i=n>214?254:n+40,d=A(e,h,i),w=I(d),w.string?(p=w.format,r=w,w=w.string,"EAN-13"===p&&(void 0===B[w]?(B[w]={count:1,correction:r.correction},b.push(w)):(B[w].count=B[w].count+1,B[w].correction=B[w].correction+r.correction),w=!1)):w=!1,g+=4*K.width}while(!w&&g<f.length);if(w&&"EAN-13"!==p&&u.push({Format:p,Value:w,bBox:Q[o]}),"EAN-13"===p&&(w=!1),!w){s(4,2),g=0,f=v(20);do{for(e=f.subarray(g,g+4*K.width),t=[],c=0;c<256;c++)t[c]=0;for(c=0;c<e.length;c+=4)a=Math.round((e[c]+e[c+1]+e[c+2])/3),t[a]=t[a]+1;n=l(t,e.length/4),h=n<40?0:n-40,i=n>215?255:n+40,d=A(e,h,i),w=I(d),w.string?(p=w.format,r=w,w=w.string,"EAN-13"===p&&(void 0===B[w]?(B[w]={count:1,correction:r.correction},b.push(w)):(B[w].count=B[w].count+1,B[w].correction=B[w].correction+r.correction),w=!1)):w=!1,g+=4*K.width}while(!w&&g<f.length);if("EAN-13"===p){var L={},N=void 0;for(N in B){B[N].correction=B[N].correction/B[N].count;var G=B[N].correction;G-=B[N].count,G+=b.indexOf(N),L[N]=G}var O=Number.POSITIVE_INFINITY,j="";for(var k in L)L[k]<O&&(O=L[k],j=N);w=O<11&&j}w&&u.push({Format:p,Value:w,bBox:Q[o]})}if(u.length>0&&!J)break}return u}var _=["Code128","Code93","Code39","EAN-13","2Of5","Inter2Of5","Codabar"],T=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],x={212222:{A:" ",B:" ",C:"00"},222122:{A:"!",B:"!",C:"01"},222221:{A:"'",B:"'",C:"02"},121223:{A:"#",B:"#",C:"03"},121322:{A:"$",B:"$",C:"04"},131222:{A:"%",B:"%",C:"05"},122213:{A:"&",B:"&",C:"06"},122312:{A:"'",B:"'",C:"07"},132212:{A:"(",B:"(",C:"08"},221213:{A:")",B:")",C:"09"},221312:{A:"*",B:"*",C:"10"},231212:{A:"+",B:"+",C:"11"},112232:{A:",",B:",",C:"12"},122132:{A:"-",B:"-",C:"13"},122231:{A:".",B:".",C:"14"},113222:{A:"/",B:"/",C:"15"},123122:{A:"0",B:"0",C:"16"},123221:{A:"1",B:"1",C:"17"},223211:{A:"2",B:"2",C:"18"},221132:{A:"3",B:"3",C:"19"},221231:{A:"4",B:"4",C:"20"},213212:{A:"5",B:"5",C:"21"},223112:{A:"6",B:"6",C:"22"},312131:{A:"7",B:"7",C:"23"},311222:{A:"8",B:"8",C:"24"},321122:{A:"9",B:"9",C:"25"},321221:{A:":",B:":",C:"26"},312212:{A:";",B:";",C:"27"},322112:{A:"<",B:"<",C:"28"},322211:{A:"=",B:"=",C:"29"},212123:{A:">",B:">",C:"30"},212321:{A:"?",B:"?",C:"31"},232121:{A:"@",B:"@",C:"32"},111323:{A:"A",B:"A",C:"33"},131123:{A:"B",B:"B",C:"34"},131321:{A:"C",B:"C",C:"35"},112313:{A:"D",B:"D",C:"36"},132113:{A:"E",B:"E",C:"37"},132311:{A:"F",B:"F",C:"38"},211313:{A:"G",B:"G",C:"39"},231113:{A:"H",B:"H",C:"40"},231311:{A:"I",B:"I",C:"41"},112133:{A:"J",B:"J",C:"42"},112331:{A:"K",B:"K",C:"43"},132131:{A:"L",B:"L",C:"44"},113123:{A:"M",B:"M",C:"45"},113321:{A:"N",B:"N",C:"46"},133121:{A:"O",B:"O",C:"47"},313121:{A:"P",B:"P",C:"48"},211331:{A:"Q",B:"Q",C:"49"},231131:{A:"R",B:"R",C:"50"},213113:{A:"S",B:"S",C:"51"},213311:{A:"T",B:"T",C:"52"},213131:{A:"U",B:"U",C:"53"},311123:{A:"V",B:"V",C:"54"},311321:{A:"W",B:"W",C:"55"},331121:{A:"X",B:"X",C:"56"},312113:{A:"Y",B:"Y",C:"57"},312311:{A:"Z",B:"Z",C:"58"},332111:{A:"[",B:"[",C:"59"},314111:{A:"\\",B:"\\",C:"60"},221411:{A:"]",B:"]",C:"61"},431111:{A:"^",B:"^",C:"62"},111224:{A:"_",B:"_",C:"63"},111422:{A:"NUL",B:"`",C:"64"},121124:{A:"SOH",B:"a",C:"65"},121421:{A:"STX",B:"b",C:"66"},141122:{A:"ETX",B:"c",C:"67"},141221:{A:"EOT",B:"d",C:"68"},112214:{A:"ENQ",B:"e",C:"69"},112412:{A:"ACK",B:"f",C:"70"},122114:{A:"BEL",B:"g",C:"71"},122411:{A:"BS",B:"h",C:"72"},142112:{A:"HT",B:"i",C:"73"},142211:{A:"LF",B:"j",C:"74"},241211:{A:"VT",B:"k",C:"75"},221114:{A:"FF",B:"l",C:"76"},413111:{A:"CR",B:"m",C:"77"},241112:{A:"SO",B:"n",C:"78"},134111:{A:"SI",B:"o",C:"79"},111242:{A:"DLE",B:"p",C:"80"},121142:{A:"DC1",B:"q",C:"81"},121241:{A:"DC2",B:"r",C:"82"},114212:{A:"DC3",B:"s",C:"83"},124112:{A:"DC4",B:"t",C:"84"},124211:{A:"NAK",B:"u",C:"85"},411212:{A:"SYN",B:"v",C:"86"},421112:{A:"ETB",B:"w",C:"87"},421211:{A:"CAN",B:"x",C:"88"},212141:{A:"EM",B:"y",C:"89"},214121:{A:"SUB",B:"z",C:"90"},412121:{A:"ESC",B:"{",C:"91"},111143:{A:"FS",B:"|",C:"92"},111341:{A:"GS",B:"}",C:"93"},131141:{A:"RS",B:"~",C:"94"},114113:{A:"US",B:"DEL",C:"95"},114311:{A:"FNC3",B:"FNC3",C:"96"},411113:{A:"FNC2",B:"FNC2",C:"97"},411311:{A:"SHIFT_B",B:"SHIFT_A",C:"98"},113141:{A:"Code_C",B:"Code_C",C:"99"},114131:{A:"Code_B",B:"FNC4",C:"Code_B"},311141:{A:"FNC4",B:"Code_A",C:"Code_A"},411131:{A:"FNC1",B:"FNC1",C:"FNC1"},211412:"A",211214:"B",211232:"C",233111:{A:"STOP",B:"STOP",C:"STOP"},value:["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","233111"]},y={131112:{value:0,character:"0"},111213:{value:1,character:"1"},111312:{value:2,character:"2"},111411:{value:3,character:"3"},121113:{value:4,character:"4"},121212:{value:5,character:"5"},121311:{value:6,character:"6"},111114:{value:7,character:"7"},131211:{value:8,character:"8"},141111:{value:9,character:"9"},211113:{value:10,character:"A"},211212:{value:11,character:"B"},211311:{value:12,character:"C"},221112:{value:13,character:"D"},221211:{value:14,character:"E"},231111:{value:15,character:"F"},112113:{value:16,character:"G"},112212:{value:17,character:"H"},112311:{value:18,character:"I"},122112:{value:19,character:"J"},132111:{value:20,character:"K"},111123:{value:21,character:"L"},111222:{value:22,character:"M"},111321:{value:23,character:"N"},121122:{value:24,character:"O"},131121:{value:25,character:"P"},212112:{value:26,character:"Q"},212211:{value:27,character:"R"},211122:{value:28,character:"S"},211221:{value:29,character:"T"},221121:{value:30,character:"U"},222111:{value:31,character:"V"},112122:{value:32,character:"W"},112221:{value:33,character:"X"},122121:{value:34,character:"Y"},123111:{value:35,character:"Z"},121131:{value:36,character:"-"},311112:{value:37,character:"."},311211:{value:38,character:" "},321111:{value:39,character:"$"},112131:{value:40,character:"/"},113121:{value:41,character:"+"},211131:{value:42,character:"%"},121221:{value:43,character:"($)"},312111:{value:44,character:"(%)"},311121:{value:45,character:"(/)"},122211:{value:46,character:"(+)"},111141:{value:-1,character:"*"}},U={111221211:{value:0,character:"0"},211211112:{value:1,character:"1"},112211112:{value:2,character:"2"},212211111:{value:3,character:"3"},111221112:{value:4,character:"4"},211221111:{value:5,character:"5"},112221111:{value:6,character:"6"},111211212:{value:7,character:"7"},211211211:{value:8,character:"8"},112211211:{value:9,character:"9"},211112112:{value:10,character:"A"},112112112:{value:11,character:"B"},212112111:{value:12,character:"C"},111122112:{value:13,character:"D"},211122111:{value:14,character:"E"},112122111:{value:15,character:"F"},111112212:{value:16,character:"G"},211112211:{value:17,character:"H"},112112211:{value:18,character:"I"},111122211:{value:19,character:"J"},211111122:{value:20,character:"K"},112111122:{value:21,character:"L"},212111121:{value:22,character:"M"},111121122:{value:23,character:"N"},211121121:{value:24,character:"O"},112121121:{value:25,character:"P"},111111222:{value:26,character:"Q"},211111221:{value:27,character:"R"},112111221:{value:28,character:"S"},111121221:{value:29,character:"T"},221111112:{value:30,character:"U"},122111112:{value:31,character:"V"},222111111:{value:32,character:"W"},121121112:{value:33,character:"X"},221121111:{value:34,character:"Y"},122121111:{value:35,character:"Z"},121111212:{value:36,character:"-"},221111211:{value:37,character:"."},122111211:{value:38,character:" "},121212111:{value:39,character:"$"},121211121:{value:40,character:"/"},121112121:{value:41,character:"+"},111212121:{value:42,character:"%"},121121211:{value:-1,character:"*"}},D={"/A":"!","/B":"'","/C":"#","/D":"$","/E":"%","/F":"&","/G":"'","/H":"(","/I":")","/J":"*","/K":"+","/L":",","/O":"/","/Z":":","%F":";","%G":"<","%H":"=","%I":">","%J":"?","%K":"[","%L":"\\","%M":"]","%N":"^","%O":"_","+A":"a","+B":"b","+C":"c","+D":"d","+E":"e","+F":"f","+G":"g","+H":"h","+I":"i","+J":"j","+K":"k","+L":"l","+M":"m","+N":"n","+O":"o","+P":"p","+Q":"q","+R":"r","+S":"s","+T":"t","+U":"u","+V":"v","+W":"w","+X":"x","+Y":"y","+Z":"z","%P":"{","%Q":"|","%R":"|","%S":"~"},H={"0000011":"0","0000110":"1","0001001":"2",1100000:"3","0010010":"4",1000010:"5","0100001":"6","0100100":"7","0110000":"8",1001000:"9","0001100":"-","0011000":"$",1000101:":",1010001:"/",1010100:".","0011111":"+","0011010":"A","0001011":"B","0101001":"C","0001110":"D"},P={L:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},G:{1123:0,1222:1,2212:2,1141:3,2311:4,1321:5,4111:6,2131:7,3121:8,2113:9},R:{3211:0,2221:1,2122:2,1411:3,1132:4,1231:5,1114:6,1312:7,1213:8,3112:9},formats:{LLLLLL:0,LLGLGG:1,LLGGLG:2,LLGGGL:3,LGLLGG:4,LGGLLG:5,LGGGLL:6,LGLGLG:7,LGLGGL:8,LGGLGL:9}},R=!0,V=!0,K=void 0,$=void 0,W=void 0,X=void 0,J=void 0,Q=void 0;self.onmessage=function(r){var e,t;switch($={data:new Uint8ClampedArray(r.data.scan),width:r.data.scanWidth,height:r.data.scanHeight},r.data.rotation){case 8:$.data=a($.data,$.width,$.height,-90),e=r.data.scanWidth,$.width=$.height,$.height=e;break;case 6:$.data=a($.data,$.width,$.height,90),e=r.data.scanWidth,$.width=$.height,$.height=e;break;case 3:$.data=a($.data,$.width,$.height,180)}K={data:h($.data,$.width,$.height),width:$.width/2,height:$.height/2},r.data.postOrientation&&postMessage({result:K,success:"orientationData"}),X=[],J=!0,void 0!==r.data.multiple&&(J=r.data.multiple),t=void 0!==r.data.decodeFormats?r.data.decodeFormats:_;for(var n=0;n<t.length;n++)X.push(t[n]);Q=[],u(),f();var i=M();i.length>0?postMessage({id:r.data.id,result:i,success:!0}):postMessage({id:r.data.id,result:i,success:!1})}}]);